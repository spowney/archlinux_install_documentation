#temporary vconsole keymap
	loadkeys uk

#check internet is connected
	ping archlinux.org

#systemclock
	timdatectl set-ntp true
	timedatectl status

#Disk Partitions - one single ext4 formatted partition is fine these days. Assume windows has been used to create a gap or a new partition that can be formatted ext4 now.
	fdisk -l #find partition name + find efi partition - will be on boot device. formatted vfat32
	mkfs.ext4 /dev/nvme0n1p5 #this was my partition my nvme drive, partition 5.
	
	#no swap needed

	mount /dev/nvme0n1p5 /mnt  #base location for our Arch Install
	mkdir /mnt/efi #create mount point for
	mount /dev/nvme0n1p1 /mnt/efi #efi location for bootloader install, /dev/nvme0n1p1 is my existing efi partition that windows created

#Pacman Mirrorlist ranking - reflector tool on install disk now does it all automatically
	reflector

#Create filesystem, install kernal + linux base software - all handled by the pacstrap script
	pacstrap /mnt base linux linux-firmware base-devel vi vim dhcpcd

#Create fstab to automount correct drives to correct places when linux system is booted
	genfstab -U /mnt >> /mnt/etc/fstab #creates a fstab file based on the mounts found in /mnt and outputs it to the guest system /mnt in the /etc/ folder as fstab file.

#Ethernet / systemd/networkd #use the network file generated by the arch-install disk to set the ethernet connection. networkd might require dhcpcd so we`ll install it later.
	cp /etc/systemd/network/20-ethernet.network /mnt/etc/systemd/network/

#chroot into the newly set up linux os
	arch-chroot /mnt

#from this point onwards you are essentially booted into arch-linux on the harddrive. Only tools installed will be avilable.

#set timezone
	ln -sf /usr/share/zoneinfo/Europe/London /etc/localtime
	hwclock --systohc #adjust creates an adusttimefile based on the hardware clock. Dont worry about it.

#localisation

	#edit the /etc/locale.gen file and uncomment en_GB.UTF-8 UTF-8 line
	locale-gen

	#create /etc/locale.conf
	LANG=en_GB.UTF-8

	#set vconsole keyboard layout permanantly by editing /etc/vconsole.conf
	KEYMAP=uk

#Network configuration

	#create /etc/hostname
	arch-desktop

	#edit /etc/hosts
	127.0.0.1 localhost
	::1  localhost
	127.0.1.1 arch-desktop.localdomain arch-desktop

	#enable systemd-networkd.service
	systemctl enable systemd-networkd.service

#create a new initramfs - probably not needed as we havn't made any changes
	kinitcpio -P

#root password
	passwd

#Install Grub-efi Bootloader
	pacman -Sy grub efibootmgr
	grub-install --target=x86_64-efi --efi-directory /efi --bootloader-id=ARCH
	grub-mkconfig -o /boot/grub/grub.cfg
	#can add some instructions about os-prober when I actually understand it

#reboot into arch
	reboot
